# 山手線遅延×天気データ相関分析 🚃🌧️

山手線の遅延情報と天気データの相関を専門的に分析・可視化するStreamlitアプリケーション

## 概要

このプロジェクトは、天候（特に雨）が山手線の遅延にどのような影響を与えるかを専門的に分析します。

### 主な機能

- 🚊 山手線専用の遅延情報分析
- 🌤️ 東京都心部の天気データ収集
- 📊 時間帯×天候の詳細な相関分析
- 📈 山手線特化のインタラクティブダッシュボード
- 🕐 ラッシュアワーとオフピークの比較分析

## セットアップ

### 1. 依存関係のインストール

```bash
pip install -r requirements.txt
```

### 2. 環境変数の設定

```bash
cp .env.example .env
```

`.env`ファイルを編集して、必要なAPIキーを設定してください。

### 3. アプリケーションの起動

```bash
streamlit run app.py
```

## プロジェクト構成

```
data-visualization/
├── app.py                    # Streamlitメインアプリ
├── src/
│   ├── train_delay_collector.py  # 遅延データ収集
│   ├── weather_collector.py      # 天気データ収集
│   └── data_analyzer.py         # データ分析ロジック
├── data/
│   ├── raw/                  # 生データ
│   └── processed/            # 処理済みデータ
├── requirements.txt          # Python依存関係
└── .env.example             # 環境変数テンプレート
```

## 可視化内容

### 1. 概要タブ
- 山手線の平均遅延時間、遅延発生率
- 天候別の遅延分析
- ラッシュアワー vs オフピーク比較
- 雨天時の時間帯別影響

### 2. 時間帯×天候分析
- 時間帯×天候の詳細ヒートマップ
- ラッシュアワーでの天候影響分析
- 最も遅延が多い時間帯ランキング
- 天候別の時間推移グラフ

### 3. 時系列分析
- 日別の遅延推移（7日移動平均付き）
- 時間帯別の遅延パターン（ラッシュ時間色分け）
- 曜日別の遅延傾向

### 4. 詳細データ
- 天候要因との相関散布図
- フィルタリング可能な生データ表示
- CSVエクスポート機能

### 5. 山手線インサイト
- 山手線の特徴的な分析結果
- 運行特性に基づく推奨事項
- さらなる分析の提案

## データソース

- **遅延情報**: JR東日本の運行情報（現在はサンプルデータ）
- **天気情報**: OpenWeatherMap API（東京都心部）

## 山手線の特徴

- **路線長**: 34.5km（環状運行）
- **駅数**: 30駅
- **運行間隔**: 3-4分間隔（高頻度運行）
- **1日平均利用者数**: 約390万人
- **特殊性**: 始発・終電がない環状運行

## 今後の拡張予定

- 駅別遅延分析（新宿、渋谷、池袋など主要駅）
- 内回り・外回り別の遅延分析
- 機械学習による山手線遅延予測
- 接続路線への波及効果分析
- 大型イベント時の特殊分析